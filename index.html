<!-- Only the cart & script part changed, rest stays same -->
<div class="cart-modal" id="cartModal">
<span class="close" onclick="closeCart()">&times;</span>
<h3>Checkout</h3>

<form action="https://formsubmit.co/srshahrosefragrance@gmail.com" method="POST" id="checkoutForm">

<input type="text" name="Name" placeholder="Full Name" required>
<input type="email" name="Email" placeholder="Email" required>
<input type="tel" name="Phone" placeholder="Phone" required>

<input type="text" name="Country" placeholder="Country" required>
<input type="text" name="Province" placeholder="Province" required>
<input type="text" name="City" placeholder="City" required>
<input type="text" name="Street" placeholder="Street Address" required>

<h4>Order Summary</h4>
<div id="cartItems"></div>

<div class="summary-line"><span>Subtotal</span><span id="subtotal">Rs.0</span></div>
<div class="summary-line"><span>Shipping</span><span>Rs.200</span></div>
<div class="summary-line"><b>Total</b><b id="total">Rs.0</b></div>

<h4>Payment Method</h4>
<label><input type="radio" name="Payment" value="Cash on Delivery" checked> Cash on Delivery</label><br>
<label><input type="radio" name="Payment" value="Easypaisa"> Easypaisa</label><br>
<label><input type="radio" name="Payment" value="JazzCash"> JazzCash</label><br>
<label><input type="radio" name="Payment" value="Bank Transfer"> Bank Transfer</label><br>

<h4>Need Help?</h4>
<a href="https://wa.me/03368441232" target="_blank" style="color:green;text-decoration:none;font-weight:bold">
<i class="fab fa-whatsapp"></i> Contact us on WhatsApp
</a>

<button type="submit" style="margin-top:10px;padding:10px;border:none;background:gold;border-radius:10px;color:black;font-weight:bold;width:100%">Place Order</button>
</form>
</div>

<script>
let cart=[];
function addToCart(name,img,price,qtyId){
let qty=typeof qtyId==="number"?qtyId:document.getElementById(qtyId).value;
qty=parseInt(qty);

let found=cart.find(i=>i.name===name);
found?found.qty+=qty:cart.push({name,img,price,qty});

document.getElementById("cartCount").innerText=cart.reduce((a,b)=>a+b.qty,0);
openCart();
}

function openCart(){document.getElementById("cartModal").classList.add("open");updateCart()}
function closeCart(){document.getElementById("cartModal").classList.remove("open")}

function updateCart(){
let items=document.getElementById("cartItems");
items.innerHTML="";
let subtotal=0;
cart.forEach((i,index)=>{
subtotal+=i.price*i.qty;
items.innerHTML+=`
<div class="product-summary">
<img src="${i.img}">
<div>${i.name}</div>
<div class="qty-controls">
<button onclick="changeQty(${index},-1)">-</button>
<input type="text" value="${i.qty}" readonly>
<button onclick="changeQty(${index},1)">+</button>
</div>
<div>Rs.${i.price}</div>
<button style="margin-left:auto;background:red;color:white;border:none;padding:3px 6px;border-radius:5px;cursor:pointer" onclick="removeItem(${index})">Remove</button>
</div>`;
});
document.getElementById("subtotal").innerText="Rs."+subtotal;
document.getElementById("total").innerText="Rs."+(subtotal+200);
document.getElementById("cartCount").innerText=cart.reduce((a,b)=>a+b.qty,0);
}

function changeQty(index,delta){
cart[index].qty += delta;
if(cart[index].qty<1) cart[index].qty=1;
updateCart();
}

function removeItem(index){
cart.splice(index,1);
updateCart();
}

document.getElementById("checkoutForm").addEventListener("submit",function(){
let list=cart.map(i=>`${i.name} x${i.qty}`).join(", ");
let input=document.createElement("input");
input.type="hidden";input.name="Products";input.value=list;
this.appendChild(input);
});
</script>
